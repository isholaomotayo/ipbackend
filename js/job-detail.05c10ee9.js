(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["job-detail"],{"38cc":function(t,e,a){"use strict";var i=a("5d6d"),s=a.n(i);s.a},"5d6d":function(t,e,a){},"6f42":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadingJob?[a("div",{staticClass:"div__loading"},[a("Loader")],1)]:[a("section",{staticClass:"main-grid__row user-profile"},[a("div",{staticClass:"user-profile__card"},[a("div",{staticClass:"user-profile__primary"},[a("p",{staticClass:"user-profile__name"},[t._v(t._s(t.itemData.title))])]),a("div",{staticClass:"user-profile__section"},[a("h5",{staticClass:"user-profile__heading"},[t._v("Job Information")]),a("div",{staticClass:"user-profile__item"},[a("p",{staticClass:"user-profile__section__title"},[t._v("Location:")]),a("p",[t._v(t._s(t.itemData.location))])]),a("div",{staticClass:"user-profile__item"},[a("p",{staticClass:"user-profile__section__title"},[t._v("Type:")]),a("p",[t._v(t._s(t.itemData.type))])]),a("div",{staticClass:"user-profile__item"},[a("p",{staticClass:"user-profile__section__title"},[t._v("Closing Date:")]),a("p",[t._v(t._s(t._f("date")(t.itemData.closing_date)))])]),a("div",{staticClass:"user-profile__item"},[a("p",{staticClass:"user-profile__section__title"},[t._v("Status:")]),a("p",[a("span",{class:t.isActive},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(1===t.itemData.active?"Active":"Suspended")+"\n\t\t\t\t\t\t\t")])])]),a("div",{staticClass:"user-profile__item"},[a("p",{staticClass:"user-profile__section__title"},[t._v("Description:")]),a("p",{domProps:{innerHTML:t._s(t.itemData.description)}})]),"administrator"===t.getLoggedUser.category?a("div",[a("button",{staticClass:"btn btn__danger",on:{click:t.deleteJob}},[t._v("Delete")]),t.deletingJob?a("Loader"):t._e()],1):t._e()])]),a("div",{staticClass:"user-profile__tabs"},[t._m(0),a("div",{staticClass:"tab-content",attrs:{id:"myTabContent"}},[a("div",{staticClass:"tab-pane fade show active user-profile__tabs__section",attrs:{id:"applicant",role:"tabpanel","aria-labelledby":"applicant-tab"}},[a("div",{staticClass:"user-profile__notification"},[a("div",{staticClass:"activity"},[a("div",[a("section",{staticClass:"main-grid__row contacts contacts--list"},[a("div",{staticClass:"contacts--list__wrapper"},[t._m(1),a("div",{staticClass:"contacts__body"},[t.applicants.length?t._l(t.applicants,function(e){return a("div",{key:e.id,staticClass:"contacts--list__item",attrs:{applicant:e}},[t._m(2,!0),a("p",{staticClass:"info__email"},[a("router-link",{attrs:{to:{name:"user-profile",params:{id:e.user.id}}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.user.fname)+" "+t._s(e.user.lname)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1),a("p",[t._v(t._s(e.user.email))]),a("button",{staticClass:"btn btn outline",attrs:{type:"button"}},[a("a",{attrs:{href:e.resume,target:"_blank"}},[t._v("Resume")])]),a("div",["employed"===e.status?[a("button",{staticClass:"btn btn__outline",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"accepted")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAccept\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("button",{staticClass:"btn btn__danger",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"rejected")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReject\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])]:"accepted"===e.status?[a("button",{staticClass:"btn btn__save",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"employed")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEmploy\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("button",{staticClass:"btn btn__danger",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"rejected")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReject\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])]:"rejected"===e.status?void 0:[a("button",{staticClass:"btn btn__save",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"employed")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEmploy\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("button",{staticClass:"btn btn__outline",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"accepted")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAccept\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("button",{staticClass:"btn btn__danger",attrs:{type:"button"},on:{click:function(a){t.changeStatus(e.user.id,"rejected")}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tReject\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])]],2)])}):[a("p",[t._v("No job applicant yet")])]],2)]),t.total>t.limit?a("Pagination",{attrs:{options:{limit:t.limit,offset:t.offset,total:t.total,baseUrl:t.baseUrl}}}):t._e()],1)])])])]),a("div",{staticClass:"tab-pane fade user-profile__tabs__section",attrs:{id:"activity",role:"tabpanel","aria-labelledby":"activity-tab"}},[a("div",{staticClass:"settings"},[a("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.updateJob(e)}}},[a("div",{staticClass:"settings__primary"},[a("button",{directives:[{name:"show",rawName:"v-show",value:!t.isSelf,expression:"!isSelf"}],staticClass:"btn",class:t.isSuspend,attrs:{type:"button","data-dismiss":"modal","aria-label":"close",name:"button"},on:{click:function(e){return e.preventDefault(),t.toggleJobStatus(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(1===t.itemData.active?"Suspend Job":"Activate Job")+"\n\t\t\t\t\t\t\t\t\t")]),a("button",t._b({staticClass:"btn btn__save",attrs:{type:"button",name:"button"},on:{click:function(e){return e.preventDefault(),t.updateJob(e)}}},"button",{disabled:t.loading},!1),[t._v("\n\t\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t\t")])]),a("div",{staticClass:"settings__field"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("div",{staticClass:"settings__value"},[a("label",{attrs:{for:"jobTitle"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.title,expression:"itemData.title"}],staticClass:"form-control",class:[{"is-invalid":t.errors.title}],attrs:{name:"title",value:"",type:"text",id:"jobTitle"},domProps:{value:t.itemData.title},on:{keydown:function(e){t.clearErrors(e.target.name)},input:function(e){e.target.composing||t.$set(t.itemData,"title",e.target.value)}}})]),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.errors.title)+"\n\t\t\t\t\t\t\t\t\t\t\t")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("div",{staticClass:"settings__value"},[a("label",{attrs:{for:"jobType"}},[t._v("Type")]),a("form",{staticClass:"form__select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.jobType,expression:"jobType"}],staticClass:"custom-select",attrs:{name:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.jobType=e.target.multiple?a:a[0]},t.updateJob]}},[a("option",{attrs:{selected:"",value:""}},[t._v("Change type")]),a("option",{attrs:{value:"full-time"}},[t._v("Full Time")]),a("option",{attrs:{value:"contract"}},[t._v("Contract")])])])])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("div",{staticClass:"settings__value"},[a("label",{attrs:{for:"jobLocation"}},[t._v("Location")]),a("form",{staticClass:"form__select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.jobLocation,expression:"jobLocation"}],staticClass:"form-control",class:[{"is-invalid":t.errors.location}],attrs:{id:"career"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.jobLocation=e.target.multiple?a:a[0]},t.updateJob]}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("Select a location for the job")]),t._l(t.states,function(e,i){return a("option",{key:i,domProps:{value:e.value}},[t._v(t._s(e.text))])})],2)]),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.errors.location)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"modal__label",attrs:{for:"dob"}},[t._v("Closing Date")]),a("date-picker",{attrs:{config:t.options},model:{value:t.itemData.closing_date,callback:function(e){t.$set(t.itemData,"closing_date",e)},expression:"itemData.closing_date"}}),a("span",{staticClass:"modal__form__icon"},[a("svg",{attrs:{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("title",[t._v("DOB Icon")]),a("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),a("path",{attrs:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z",fill:"#828282"}})])]),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.errors.closing_date)+"\n\t\t\t\t\t\t\t\t\t\t\t")])],1)]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"modal__label",attrs:{for:"dob"}},[t._v("Description")]),a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},model:{value:t.itemData.description,callback:function(e){t.$set(t.itemData,"description",e)},expression:"itemData.description"}})],1)])])])])])])])])]],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"applicant-tab","data-toggle":"tab",href:"#applicant",role:"tab","aria-controls":"applicant","aria-selected":"true"}},[t._v("Applicants")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"activity-tab","data-toggle":"tab",href:"#activity",role:"tab","aria-controls":"activity","aria-selected":"false"}},[t._v("Edit Job")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contacts--list__item head"},[a("div"),a("p",[t._v("Name")]),a("p",[t._v("Email")]),a("p",[t._v("Resume")]),a("p",[t._v("Action")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"check"},[a("input",{attrs:{type:"checkbox"}}),a("div",{staticClass:"check-mark"})])}],n=a("be94"),o=(a("ac6a"),a("456d"),a("cadf"),a("551c"),a("097d"),a("a753"),a("8096"),a("14e1"),a("953d")),l=a("133f"),r=a.n(l),c=(a("b2a2"),a("8890"),a("6755"),a("ca56"),a("2f62")),u=a("a48f"),d=a("555f"),p=a("99f7"),_=a("e49c"),b=a("eae4"),v=a("1799"),f=a("fdc6"),m=a("8504"),g={name:"JobDetail",mixins:[_["a"]],data:function(){return{itemData:{},loadingJob:!0,jobLoaded:!1,errors:{},jobType:"",options:{format:"YYYY-MM-DD",useCurrent:!0},applicants:[],applicantsLoading:!0,applicantsLoaded:!1,limit:6,offset:0,total:0,baseUrl:"",states:f["a"],deletingJob:!1,jobLocation:"",jobResult:"",locationResult:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]]}}}},watch:{$route:function(){this.limit=this.$route.query.limit?this.$route.query.limit:10,this.offset=this.$route.query.offset?this.$route.query.offset:0,this.getApplicants()}},created:function(){var t=this;this.limit=this.$route.query.limit?this.$route.query.limit:this.limit,this.offset=this.$route.query.offset?this.$route.query.offset:this.offset,this.baseUrl="jobs/".concat(this.$route.params.id,"/detail"),this.getJob(),this.getApplicants(),m["a"].$on("applicant-status-updated",function(e){t.applicants.map(function(t){return t.id===e.id&&(t.status=e.status,!0)})})},methods:{deleteJob:function(){var t=this;return this.deletingJob=!0,Object(u["c"])(this.$route.params.id).then(function(e){return 200===e.status&&(t.deletingJob=!1,Object(b["b"])({title:"Success! Job has been deleted!"}),setTimeout(function(){t.$router.push("/jobs")},500),!0)}).catch(function(e){return t.deletingJob=!1,Object(b["a"])({title:"Oops! Something went wrong. Pls try again."}),e}),!0},getJob:function(){var t=this;Object(u["f"])(this.$route.params.id).then(function(e){if(200===e.status){var a=e.data.data;return delete a.created_at,delete a.updated_at,t.itemData=a,t.jobResult=t.itemData.type,t.locationResult=t.itemData.location,!0}return t.jobLoaded=!1,!1}).catch(function(e){return t.jobLoaded=!1,e}).finally(function(){t.loadingJob=!1})},updateJob:function(){var t=this,e=this.itemData;return e.type=this.jobType||this.jobResult,e.location=this.jobLocation||this.locationResult,delete e.user_id,this.validate(e,p["a"].update),Object.keys(this.issues).length>0?(this.errors=this.issues,!1):(Object(u["i"])(e).then(function(e){200===e.status&&Object(b["b"])({title:"Success! Job has been updated!"}),t.loading=!1}).catch(function(e){return t.loading=!1,Object(b["a"])({title:"Ooops! Something went wrong. Pls try again."}),e}),!0)},toggleJobStatus:function(){var t=this;return this.itemData.active=0===this.itemData.active?1:0,Object(u["i"])(this.itemData).then(function(e){if(200===e.status){var a=1===t.itemData.active?"Job has been activated":"Job has been suspended";Object(b["b"])({title:"Success! ".concat(a)})}t.loading=!1}).catch(function(e){return t.loading=!1,Object(b["a"])({title:"Ooops! Something went wrong. Pls try again."}),e}),!0},getApplicants:function(){var t=this;Object(u["d"])(this.$route.params.id,this.limit,this.offset).then(function(e){return 200===e.status?(t.applicants=e.data.data,t.total=e.data.total,t.applicantsLoaded=!0,!0):(t.applicantsLoaded=!1,!1)}).catch(function(e){return t.applicantsLoaded=!1,e}).finally(function(){t.applicantsLoading=!1})},changeStatus:function(t,e){var a=this,i={user_id:t,status:e};return Object(u["a"])(this.$route.params.id,i).then(function(t){return 200===t.status&&(m["a"].$emit("applicant-status-updated",t.data),Object(b["b"])({title:"Success! Applicant has been ".concat(i.status,"!")}),!0)}).catch(function(t){return a.loading=!1,Object(b["a"])({title:"Ooops! Something went wrong. Pls try again."}),t}),!0}},computed:Object(n["a"])({},Object(c["c"])(["getLoggedUser"]),{isSuspend:function(){return[1===this.itemData.active?"btn__danger":"btn__save"]},isActive:function(){return[1===this.itemData.active?"badge badge-pill badge-success":"badge badge-pill badge-danger"]},isSelf:function(){return this.itemData.id===this.$session.get("id")},editor:function(){return this.$refs.myTextEditor.quill}}),components:{Loader:d["a"],datePicker:r.a,Pagination:v["a"],quillEditor:o["quillEditor"]},filters:{date:function(t){return moment(t).format("Do, MMM YYYY")}}},h=g,C=(a("38cc"),a("2877")),y=Object(C["a"])(h,i,s,!1,null,"24a6ddbb",null);y.options.__file="JobDetail.vue";e["default"]=y.exports}}]);
//# sourceMappingURL=job-detail.05c10ee9.js.map