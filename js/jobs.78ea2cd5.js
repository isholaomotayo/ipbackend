(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["jobs"],{"0ae1":function(t,e,a){},"4df0":function(t,e,a){"use strict";var s=a("0ae1"),o=a.n(s);o.a},8260:function(t,e,a){},b4a7:function(t,e,a){"use strict";a.d(e,"i",function(){return n}),a.d(e,"f",function(){return r}),a.d(e,"c",function(){return c}),a.d(e,"a",function(){return l}),a.d(e,"j",function(){return d}),a.d(e,"h",function(){return u}),a.d(e,"g",function(){return m}),a.d(e,"e",function(){return f}),a.d(e,"d",function(){return b}),a.d(e,"b",function(){return v}),a.d(e,"k",function(){return _});var s=a("bc3a"),o=a.n(s),i=a("5f87");function n(t,e){return Object(i["c"])()?o.a.get("/v1/careers?limit=".concat(t,"&offset=").concat(e)):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function r(t){return Object(i["c"])()?o.a.get("/v1/careers/".concat(t)):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function c(t){return Object(i["c"])()?o.a.delete("/v1/careers/".concat(t)):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function l(t){return Object(i["c"])()?o.a.post("/v1/careers",t):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function d(t,e){return Object(i["c"])()?o.a.patch("/v1/careers/".concat(t),e):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function u(t,e){return Object(i["c"])()?o.a.get("/v1/careersegments?limit=".concat(t,"&offset=").concat(e)):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function m(t){return Object(i["c"])()?o.a.get("/v1/careersegments/".concat(t)):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function f(){return Object(i["c"])()?o.a.get("/v1/careersegments"):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function b(t){return Object(i["c"])()?o.a.delete("/v1/careersegments/".concat(t)):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function v(t){return Object(i["c"])()?o.a.post("/v1/careersegments",t):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function _(t,e){return Object(i["c"])()?o.a.patch("/v1/careersegments/".concat(t),e):Promise.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}},b79a:function(t,e,a){"use strict";var s=a("8260"),o=a.n(s);o.a},c172:function(t,e,a){"use strict";var s=a("fa25"),o=a.n(s);o.a},e85a:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.jobsLoading?[a("div",{staticClass:"div__loading"},[a("Loader")],1)]:[a("div",{staticClass:"main__header"},[t._m(0),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"btn btn__primary",attrs:{type:"button",name:"button","data-toggle":"modal","data-target":"#userModal"}},[a("span",{staticClass:"btn__icon"},[a("svg",{attrs:{width:"24",height:"13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M8 5H5V2H3v3H0v2h3v3h2V7h3V5zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 0 18 0c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86 0 1.07-.34 2.04-.9 2.86.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 0 13 0c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16C20.45 8.89 21 9.82 21 11v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 8c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z",fill:"#fff"}})])]),t._v("Add Job")])])]),a("section",{staticClass:"main-grid__row contacts contacts--list"},[a("div",{staticClass:"contacts--list__wrapper"},[t._m(1),a("div",{staticClass:"contacts__body"},[t.jobsLoaded&&t.jobs.length?t._l(t.jobs,function(e){return a("JobItem",{key:e.id,attrs:{"job-data":e}},[t._v("\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t")])}):t.jobsLoaded?[a("p",[t._v("No job found")])]:[a("p",[t._v("An error occurred while loading jobs, please try again.")])]],2)])])],t.total>t.limit?a("Pagination",{attrs:{options:{limit:t.limit,offset:t.offset,total:t.total,baseUrl:t.baseUrl}}}):t._e(),a("AddJob")],2)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main__primary"},[a("h3",{staticClass:"main__title"},[t._v("Jobs")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contacts--list__item head"},[a("div"),a("p",[t._v("Title & Type")]),a("p",[t._v("Status")]),a("p",[t._v("Location")]),a("p",[t._v("Closing Date")]),a("p",[t._v("Actions")])])}],i=a("be94"),n=a("a48f"),r=a("555f"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"contacts--list__item"},[t._m(0),a("div",{key:t.job.id,staticClass:"contacts__info"},[a("div",{staticClass:"info__primary"},[a("p",{staticClass:"info__name"},[t._v(t._s(t.job.title))]),a("p",{staticClass:"info__email"},[t._v(t._s(t.job.type))])])]),a("p",[a("span",{class:t.isActive},[t._v("\n                    "+t._s(1===t.job.active?"Active":"Suspended")+"\n\t\t\t\t")])]),a("p",[t._v(t._s(t.job.location))]),a("p",{staticClass:"info__address"},[t._v(t._s(t._f("date")(t.job.closing_date)))]),a("p",[a("router-link",{staticClass:"btn btn__primary",attrs:{to:{name:"job-detail",params:{jobData:t.jobData,id:t.job.id}}}},[t._v("\n\t\t\t\t\tView Job\n\t\t\t\t")])],1)])])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"check"},[a("input",{attrs:{type:"checkbox"}}),a("div",{staticClass:"check-mark"})])}],d={name:"JobItem",props:{jobData:{type:Object,default:function(){return{id:null,fname:"",lname:"",email:"",phone:""}}}},data:function(){return{job:this.jobData}},filters:{date:function(t){return moment(t).format("Do, MMM YYYY")}},computed:{isActive:function(){return[1===this.job.active?"badge badge-pill badge-success":"badge badge-pill badge-danger"]}}},u=d,m=(a("c172"),a("2877")),f=Object(m["a"])(u,c,l,!1,null,"1a52467e",null);f.options.__file="JobItem.vue";var b=f.exports,v=a("1799"),_=a("8504"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"userModal","aria-labelledby":"contactModalTitle",tabindex:"-1",role:"dialog","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header modal__header"},[a("h3",{staticClass:"modal-title",attrs:{id:"contactModalTitle"}},[t._v("Add Job")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"close"},on:{click:function(e){e.preventDefault(),t.clearErrors()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body modal__body"},[a("form",{staticClass:"modal__form",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.createJob(e)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"modal__label",attrs:{for:"fname"}},[t._v("Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.itemData.title,expression:"itemData.title"}],staticClass:"form-control",class:[{"is-invalid":t.errors.title}],attrs:{name:"fname",value:"",type:"text",id:"jobTitle",placeholder:"Title"},domProps:{value:t.itemData.title},on:{keydown:function(e){t.clearErrors(e.target.name)},input:function(e){e.target.composing||t.$set(t.itemData,"title",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t"+t._s(t.errors.title)+"\n\t\t\t\t")])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"modal__label",attrs:{for:"lname"}},[t._v("Type")]),a("select",{staticClass:"custom-select form-control",class:[{"is-invalid":t.errors.type}],attrs:{name:""},on:{change:function(e){t.setJobType(e)},keydown:function(e){t.clearErrors(e.target.name)}}},[a("option",{attrs:{selected:"",value:""}},[t._v("Type")]),a("option",{attrs:{value:"full-time"}},[t._v("Full Time")]),a("option",{attrs:{value:"contract"}},[t._v("Contract")])]),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t"+t._s(t.errors.type)+"\n\t\t\t\t")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"modal__label",attrs:{for:"phone"}},[t._v("Location")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.itemData.location,expression:"itemData.location"}],staticClass:"custom-select form-control",class:[{"is-invalid":t.errors.location}],attrs:{id:"career"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.itemData,"location",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("Select a location for the job")]),t._l(t.states,function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(t._s(e.text))])})],2),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t\t"+t._s(t.errors.location)+"\n\t\t\t\t\t")])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{staticClass:"modal__label",attrs:{for:"career"}},[t._v("Career Track")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.itemData.career_id,expression:"itemData.career_id"}],staticClass:"custom-select form-control",class:[{"is-invalid":t.errors.career}],attrs:{id:"career"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.itemData,"career_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("Select a career for this job")]),t._l(t.careers,function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t\t"+t._s(t.errors.career_id)+"\n\t\t\t\t\t")])])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-12"},[a("label",{staticClass:"modal__label",attrs:{for:"email"}},[t._v("Closing Date")]),a("date-picker",{attrs:{config:t.options},model:{value:t.itemData.closing_date,callback:function(e){t.$set(t.itemData,"closing_date",e)},expression:"itemData.closing_date"}}),a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\t\t\t\t\t"+t._s(t.errors.closing_date)+"\n\t\t\t\t\t")])],1)]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"modal__label",attrs:{for:"address"}},[t._v("Description")]),a("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},model:{value:t.itemData.description,callback:function(e){t.$set(t.itemData,"description",e)},expression:"itemData.description"}})],1)])]),a("div",{staticClass:"modal-footer modal__footer"},[a("button",{staticClass:"btn btn--md",attrs:{type:"button","data-dismiss":"modal","aria-label":"close",name:"button"},on:{click:function(e){e.preventDefault(),t.clearErrors()}}},[t._v("Cancel\n\t\t\t")]),a("button",t._b({staticClass:"btn btn--md btn__primary",attrs:{type:"button",name:"button"},on:{click:function(e){return e.preventDefault(),t.createJob(e)}}},"button",{disabled:t.loading},!1),[t._v("Add Job\n\t\t\t")])])])])])},h=[],g=(a("ac6a"),a("456d"),a("a753"),a("8096"),a("14e1"),a("953d")),j=a("133f"),C=a.n(j),y=(a("b2a2"),a("8890"),a("6755"),a("ca56"),a("99f7")),w=a("e49c"),D=a("eae4"),k=a("fdc6"),x=a("b4a7"),U={name:"AddJob",mixins:[w["a"]],data:function(){return{itemData:{title:"",type:"",location:"",closing_date:"",description:""},errors:{},options:{format:"YYYY-MM-DD",useCurrent:!0},states:k["a"],loadingCareers:!0,careersLoaded:!1,loading:!1,careers:[],editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]]}}}},methods:{setJobType:function(t){this.itemData.type=t.target.value},createJob:function(){var t=this;return this.itemData.user_id=this.$session.get("id"),this.validate(this.itemData,y["a"].create),Object.keys(this.issues).length>0?(this.errors=this.issues,!1):(Object(n["b"])(this.itemData).then(function(e){201===e.status&&(t.clearFormField(),_["a"].$emit("job-created",e.data),Object(D["b"])({title:"Success! New job has been added"})),t.loading=!1}).catch(function(e){return t.loading=!1,Object(D["a"])({title:"Ooops! Something went wrong. Pls try again."}),e}),!0)},getCareers:function(){var t=this;return this.loadingCareers=!0,Object(x["i"])().then(function(e){return 200===e.status&&(t.careers=e.data.data,t.careersLoaded=!0,!0)}).catch(function(e){return t.loadingCareers=!1,e}),!0}},components:{datePicker:C.a,quillEditor:g["quillEditor"]},created:function(){this.getCareers()},computed:{editor:function(){return this.$refs.myTextEditor.quill}}},J=U,O=(a("b79a"),Object(m["a"])(J,p,h,!1,null,"279595a2",null));O.options.__file="AddJob.vue";var T=O.exports,$=a("2f62"),L={name:"Jobs",data:function(){return{jobs:[],jobsLoading:!0,jobsLoaded:!1,limit:6,offset:0,total:0,loading:!0,baseUrl:"jobs"}},created:function(){var t=this;this.limit=this.$route.query.limit?this.$route.query.limit:this.limit,this.offset=this.$route.query.offset?this.$route.query.offset:this.offset,_["a"].$on("job-created",function(e){t.jobs.unshift(e)}),"administrator"===this.getLoggedUser.category?this.getJobs():this.getEmployerJobs()},methods:{getJobs:function(){var t=this;this.jobsLoading=!0,Object(n["g"])(this.limit,this.offset).then(function(e){return 200===e.status?(t.jobs=e.data.data,t.total=e.data.total,t.jobsLoaded=!0,!0):(t.jobsLoaded=!1,!1)}).catch(function(e){return t.jobsLoaded=!1,e}).finally(function(){t.jobsLoading=!1})},getEmployerJobs:function(){var t=this;Object(n["e"])(this.getLoggedUser.id).then(function(e){return 200===e.status?(t.jobs=e.data.data,t.total=e.data.total,t.jobsLoaded=!0,!0):(t.jobsLoaded=!1,!1)}).catch(function(e){return t.jobsLoaded=!1,e}).finally(function(){t.jobsLoading=!1})}},watch:{$route:function(){this.limit=this.$route.query.limit?this.$route.query.limit:10,this.offset=this.$route.query.offset?this.$route.query.offset:0,this.getJobs()}},components:{JobItem:b,Loader:r["a"],Pagination:v["a"],AddJob:T},computed:Object(i["a"])({},Object($["c"])(["getLoggedUser"]))},P=L,E=(a("4df0"),Object(m["a"])(P,s,o,!1,null,"e8161e8e",null));E.options.__file="Jobs.vue";e["default"]=E.exports},fa25:function(t,e,a){}}]);
//# sourceMappingURL=jobs.78ea2cd5.js.map